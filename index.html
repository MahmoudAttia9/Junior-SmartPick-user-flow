<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPick User Flows</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }
        h2 {
            color: #2980b9;
            margin-top: 40px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #34495e;
            margin-top: 30px;
        }
        .diagram-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .toc {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 20px;
        }
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .section-customer {
            border-left: 5px solid #27ae60;
        }
        .section-vendor {
            border-left: 5px solid #e74c3c;
        }
    </style>
</head>
<body>
    <h1>ðŸ›’ SmartPick User Flows Documentation</h1>
    
    <div class="toc">
        <h3>Table of Contents</h3>
        <ul>
            <li><strong>Customer Flows</strong>
                <ul>
                    <li><a href="#customer-browse">1.1 Browse & Discovery Flow</a></li>
                    <li><a href="#customer-checkout">1.2 Identity-First Checkout Flow</a></li>
                    <li><a href="#customer-tracking">1.3 Order Tracking Flow</a></li>
                    <li><a href="#customer-returns">1.4 Returns & Refund Flow</a></li>
                </ul>
            </li>
            <li><strong>Vendor Flows</strong>
                <ul>
                    <li><a href="#vendor-registration">2.1 Vendor Registration & Onboarding</a></li>
                    <li><a href="#vendor-listing">2.2 AI-Assisted Product Listing</a></li>
                    <li><a href="#vendor-fulfillment">2.3 Order Fulfillment Flow</a></li>
                    <li><a href="#vendor-payout">2.4 Wallet & Payout Flow</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- CUSTOMER FLOWS -->
    <h2 class="section-customer">Customer Flows</h2>

    <h3 id="customer-browse">1.1 Browse & Discovery Flow</h3>
    <p>How customers explore products using AI-powered features without authentication.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> HomePage[Customer visits Homepage]
    
    HomePage --> SearchMethod{How to search?}
    
    SearchMethod -->|Text| TextInput[Enter search query]
    SearchMethod -->|Image| ImageUpload[Upload product image]
    SearchMethod -->|Browse| CategorySelect[Select category]
    
    TextInput --> AIProcess1[AI semantic search]
    ImageUpload --> AIProcess2[AI visual search]
    CategorySelect --> LoadCategory[Load products]
    
    AIProcess1 --> DisplayResults[Display results]
    AIProcess2 --> DisplayResults
    LoadCategory --> DisplayResults
    
    DisplayResults --> SelectProduct[Select product]
    SelectProduct --> ViewPDP[View Product Page]
    
    ViewPDP --> UseFitRoom{Use Virtual Fitting Room?}
    
    UseFitRoom -->|Yes| EnterMeasure[Enter height/weight]
    EnterMeasure --> AISize[AI size recommendation]
    AISize --> AddToCart[Add to cart]
    
    UseFitRoom -->|No| AddToCart
    
    AddToCart --> ContinueShopping{Continue shopping?}
    
    ContinueShopping -->|Yes| HomePage
    ContinueShopping -->|No| GoCheckout[Proceed to checkout]
    
    GoCheckout --> EndBrowse([End])
        </div>
    </div>

    <h3 id="customer-checkout">1.2 Identity-First Checkout Flow</h3>
    <p>Passwordless authentication with cart merge logic.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> ReviewCart[Review cart items]
    ReviewCart --> EnterPhone[Enter mobile number]
    EnterPhone --> SendOTP[System sends OTP]
    SendOTP --> InputOTP[Enter OTP code]
    
    InputOTP --> ValidateOTP{OTP valid?}
    
    ValidateOTP -->|No| OTPError[Show error]
    OTPError --> RetryOTP{Retry?}
    RetryOTP -->|Retry| InputOTP
    RetryOTP -->|Resend| SendOTP
    
    ValidateOTP -->|Yes| CheckPhone{Phone in DB?}
    
    CheckPhone -->|No - New| CreateUser[Create account]
    CreateUser --> AssignCart[Assign guest cart]
    AssignCart --> EnterDetails[Enter name & address]
    
    CheckPhone -->|Yes - Returning| LoadProfile[Load profile]
    LoadProfile --> MergeCart[MERGE: Guest + Saved Cart]
    MergeCart --> ConfirmAddress{Confirm address?}
    
    ConfirmAddress -->|Yes| SelectPayment
    ConfirmAddress -->|No| EditAddress[Edit address]
    EditAddress --> SelectPayment
    
    EnterDetails --> SelectPayment{Payment method?}
    
    SelectPayment -->|Online| PaymobProcess[Paymob payment]
    SelectPayment -->|COD| CODProcess[Cash on Delivery]
    
    PaymobProcess --> PaymentSuccess{Success?}
    
    PaymentSuccess -->|No| PaymentFailed[Payment error]
    PaymentFailed --> SelectPayment
    
    PaymentSuccess -->|Yes| CreateOrder[Create order]
    CODProcess --> CreateOrder
    
    CreateOrder --> ShowConfirm[Order confirmation]
    ShowConfirm --> EndCheckout([End])
        </div>
    </div>

    <h3 id="customer-tracking">1.3 Order Tracking Flow</h3>
    <p>Track orders through hub-based logistics.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> ClickOrders[Click My Orders]
    ClickOrders --> EnterPhone[Enter mobile]
    EnterPhone --> SendOTP[Send OTP]
    SendOTP --> InputOTP[Enter OTP]
    
    InputOTP --> ValidOTP{Valid?}
    ValidOTP -->|No| EnterPhone
    ValidOTP -->|Yes| LoadOrders[Load orders]
    
    LoadOrders --> HasOrders{Has orders?}
    HasOrders -->|No| NoOrders[No orders found]
    NoOrders --> End1([End])
    
    HasOrders -->|Yes| SelectOrder[Select order]
    SelectOrder --> DisplayStatus[Show status]
    
    DisplayStatus --> StatusType{Status?}
    
    StatusType -->|Pending| S1[Awaiting vendor]
    StatusType -->|Vendor Shipped| S2[Sent to hub]
    StatusType -->|Hub Received| S3[QC passed]
    StatusType -->|Out for Delivery| S4[On the way]
    StatusType -->|Delivered| S5[Delivered]
    
    S1 --> Timeline[View timeline]
    S2 --> Timeline
    S3 --> Timeline
    S4 --> Timeline
    S5 --> Timeline
    
    Timeline --> Action{Action?}
    Action -->|Support| Support[Contact support]
    Action -->|Return| Return[Request return]
    Action -->|Done| End2([End])
    
    Support --> End3([End])
    Return --> End4([End])
        </div>
    </div>

    <h3 id="customer-returns">1.4 Returns & Refund Flow</h3>
    <p>Digital return request process.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> GoOrders[Go to My Orders]
    GoOrders --> AuthOTP[Authenticate OTP]
    AuthOTP --> SelectOrder[Select order]
    
    SelectOrder --> CheckPeriod{Within return period?}
    
    CheckPeriod -->|No| Expired[Period expired]
    Expired --> End1([End])
    
    CheckPeriod -->|Yes| ClickReturn[Click Return]
    ClickReturn --> SelectItems[Select items]
    
    SelectItems --> Reason{Return reason?}
    
    Reason -->|Defective| R1[Defective item]
    Reason -->|Wrong Item| R2[Wrong item]
    Reason -->|Not as Described| R3[Not as described]
    Reason -->|Changed Mind| R4[Changed mind]
    
    R1 --> UploadPhoto[Upload photo]
    R2 --> UploadPhoto
    R3 --> UploadPhoto
    R4 --> Submit
    
    UploadPhoto --> Submit[Submit request]
    Submit --> Created[Request created]
    Created --> AdminReview[Admin reviews]
    
    AdminReview --> Decision{Decision?}
    
    Decision -->|Rejected| Reject[Show reason]
    Reject --> End2([End])
    
    Decision -->|Approved| Instructions[Return instructions]
    Instructions --> Ship[Ship to hub]
    Ship --> HubInspect[Hub inspects]
    
    HubInspect --> Pass{Passed?}
    Pass -->|No| RejectItem[Item rejected]
    RejectItem --> End3([End])
    
    Pass -->|Yes| Refund[Process refund]
    Refund --> Complete[Refund complete]
    Complete --> End4([End])
        </div>
    </div>

    <!-- VENDOR FLOWS -->
    <h2 class="section-vendor">Vendor Flows</h2>

    <h3 id="vendor-registration">2.1 Vendor Registration & Onboarding</h3>
    <p>How vendors join SmartPick platform.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> ClickSell[Click Sell with Us]
    ClickSell --> FillForm[Fill registration]
    
    FillForm --> EnterBiz[Enter business name]
    EnterBiz --> EnterPhone[Enter phone]
    EnterPhone --> EnterEmail[Enter email]
    EnterEmail --> UploadDocs[Upload documents]
    
    UploadDocs --> Submit[Submit application]
    Submit --> Pending[Status: Pending]
    
    Pending --> Review{Admin review?}
    
    Review -->|Rejected| NotifyReject[Rejection notice]
    NotifyReject --> Reapply{Reapply?}
    Reapply -->|Yes| FillForm
    Reapply -->|No| End1([End])
    
    Review -->|Approved| CreateAccount[Create account]
    CreateAccount --> SetupStore[Setup store]
    SetupStore --> AddBank[Add bank info]
    AddBank --> Ready[Account ready]
    Ready --> End2([End])
        </div>
    </div>

    <h3 id="vendor-listing">2.2 AI-Assisted Product Listing</h3>
    <p>Add products with AI content generation and safety checks.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> ClickAdd[Click Add Product]
    ClickAdd --> UploadImg[Upload images]
    
    UploadImg --> Safety{AI Safety Check?}
    
    Safety -->|Prohibited| Block[Image blocked]
    Block --> UploadImg
    
    Safety -->|Safe| EnterArabic[Enter Arabic name]
    EnterArabic --> AIGen[AI generates content]
    
    AIGen --> GenEN[English name]
    AIGen --> GenSEO[SEO description]
    AIGen --> GenCat[Auto-category]
    
    GenEN --> Review[Review content]
    GenSEO --> Review
    GenCat --> Review
    
    Review --> Edit{Edit content?}
    Edit -->|Yes| Manual[Manual edit]
    Manual --> Review
    
    Edit -->|No| Price[Set price]
    Price --> Stock[Set stock]
    
    Stock --> Variants{Add variants?}
    Variants -->|Yes| EnterVar[Enter variants]
    EnterVar --> Preview
    Variants -->|No| Preview[Preview listing]
    
    Preview --> Publish{Publish?}
    Publish -->|No| Edit
    Publish -->|Yes| Live[Product live]
    Live --> End([End])
        </div>
    </div>

    <h3 id="vendor-fulfillment">2.3 Order Fulfillment Flow</h3>
    <p>Handle orders through hub-based logistics.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> Notif[New order notification]
    Notif --> View[View order]
    View --> Prepare[Prepare item]
    Prepare --> Package[Package item]
    Package --> Label[Print hub label]
    Label --> Ship[Ship to hub]
    Ship --> Update[Status: Vendor Shipped]
    Update --> Tracking[Enter tracking]
    Tracking --> Wait[Wait for hub]
    
    Wait --> Hub{Hub action?}
    
    Hub -->|QC Failed| Fail[QC failed]
    Fail --> Return[Return to vendor]
    Return --> Cancel[Order cancelled]
    Cancel --> End1([End])
    
    Hub -->|QC Passed| Received[Hub received]
    Received --> Held[Money held]
    Held --> WaitDel[Wait delivery]
    WaitDel --> Delivered[Customer receives]
    Delivered --> ReturnPeriod[Return period]
    
    ReturnPeriod --> ReturnReq{Return requested?}
    ReturnReq -->|Yes| HandleReturn[Handle return]
    HandleReturn --> End2([End])
    
    ReturnReq -->|No| Complete[Order complete]
    Complete --> Release[Balance available]
    Release --> End3([End])
        </div>
    </div>

    <h3 id="vendor-payout">2.4 Wallet & Payout Flow</h3>
    <p>Manage earnings and request withdrawals.</p>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    Start([Start]) --> Open[Open wallet]
    Open --> Summary[View summary]
    
    Summary --> Held[Held balance]
    Summary --> Available[Available balance]
    Summary --> History[Earnings history]
    
    Held --> Check
    Available --> Check
    History --> Check
    
    Check{Withdrawal available?}
    
    Check -->|No| ShowDate[Show next date]
    ShowDate --> End1([End])
    
    Check -->|Yes| Request[Request withdrawal]
    Request --> Amount[Enter amount]
    
    Amount --> Valid{Valid amount?}
    Valid -->|No| Error[Insufficient]
    Error --> Amount
    
    Valid -->|Yes| Bank[Confirm bank]
    Bank --> Submit[Submit request]
    Submit --> Pending[Status: Pending]
    
    Pending --> Admin[Admin transfers]
    Admin --> Paid[Admin marks Paid]
    Paid --> Notify[Vendor notified]
    
    Notify --> Received{Received?}
    Received -->|No| Support[Contact support]
    Support --> Admin
    
    Received -->|Yes| Confirm[Vendor confirms]
    Confirm --> Finalize[Balance zeroed]
    Finalize --> MoveHist[Move to history]
    MoveHist --> End2([End])
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
